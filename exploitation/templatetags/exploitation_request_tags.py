from dashboard.templatetags.personal_tags import view_shortfio_coworker

from exploitation.models import eproposals

__author__ = 'ipman'

from django import template

register = template.Library()


@register.simple_tag()
def get_fullname_coworks(id_proposal):
    str_coworks = None
    list_coworkers = eproposals.objects.get(id=id_proposal).CoWorkers.all()

    for cowork in list_coworkers:
        fullname = view_shortfio_coworker(cowork.id)
        if str_coworks is None:
            str_coworks = fullname
        else:
            str_coworks = str_coworks + ', ' + fullname
    return str_coworks
